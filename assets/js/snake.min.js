/******/
!function(t){function e(n){if(i[n])return i[n].exports
var o=i[n]={i:n,l:!1,exports:{}}
return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={}
e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t}
return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict"
var n=i(2)
!function(t){t[t.right=0]="right",t[t.left=1]="left",t[t.up=2]="up",t[t.down=3]="down"}(e.Direction||(e.Direction={}))
var o=e.Direction,r=function(){function t(t,e){this.x=t,this.y=e}return t}()
e.Coordonates=r
var s=function(){function t(t,e){this.body=[],this.game=t,this.direction=o.right
for(var i=0;i<e.length;i++)this.body.push(new r(e[i].x,e[i].y))}return t.prototype.check=function(t,e){for(var i=0;i<this.body.length;i++)if(this.body[i].x==t&&this.body[i].y==e)return!0
return!1},t.prototype.draw=function(){for(var t,e,i=0;i<this.body.length;i++){t=parseInt(String(this.body[i].x))*parseInt(String(this.game.screen.blocSize))+"px",e=parseInt(String(this.body[i].y))*parseInt(String(this.game.screen.blocSize))+"px"
var n=document.createElement("div")
n.className="snakeBloc",n.style.width=this.game.screen.blocSize+"px",n.style.height=this.game.screen.blocSize+"px",n.style.top=e,n.style.left=t,n.innerHTML=" ",this.game.screen.element.appendChild(n)}},t.prototype.move=function(t){this.body.pop(),this.body.unshift(t)},t.prototype.eatFood=function(t){this.body.unshift(new r(t.position.x,t.position.y))},t.prototype.checkGameOver=function(){for(var t=1;t<this.body.length;t++)if(this.body[t].x==this.body[0].x&&this.body[t].y==this.body[0].y)return!0
return!1},t}()
e.Snake=s
var h=function(){function t(t){this.game=t,this.position=new r(null,null)}return t.prototype.randomIntFromInterval=function(t,e){return Math.random()*(e-t)+t},t.prototype.getRandomBloc=function(){do{var t=parseInt(String(this.randomIntFromInterval(this.game.screen.border.left,this.game.screen.border.right))),e=parseInt(String(this.randomIntFromInterval(this.game.screen.border.top,this.game.screen.border.down)))}while(this.game.snake.check(t,e))
this.position.x=t,this.position.y=e},t.prototype.draw=function(){var t=parseInt(String(this.position.x))*parseInt(String(this.game.screen.blocSize))+"px",e=parseInt(String(this.position.y))*parseInt(String(this.game.screen.blocSize))+"px",i=document.createElement("div")
i.className="foodBloc",i.style.width=this.game.screen.blocSize+"px",i.style.height=this.game.screen.blocSize+"px",i.style.top=e,i.style.left=t,i.innerHTML=" ",this.game.screen.element.appendChild(i)},t}()
e.Food=h
var a=function(){function t(t,e,i,o){this.score=0,this.gameOver=!1,this.screen=new n.Screen(t,i),this.snake=new s(this,[{x:2,y:2},{x:2,y:1},{x:1,y:1},{x:0,y:1},{x:0,y:0}]),this.controller=e,this.withWalls=o,this.controller.setSnake(this.snake),this.food=new h(this),this.food.getRandomBloc()}return t.prototype.restartGame=function(){this.score=0,this.gameOver=!1,this.screen.cleanScreen(),this.snake=new s(this,[{x:2,y:2},{x:2,y:1},{x:1,y:1},{x:0,y:1},{x:0,y:0}]),this.controller.setSnake(this.snake),this.food=new h(this),this.food.getRandomBloc()},t.prototype.setScreen=function(t){this.screen=t},t.prototype.setSnake=function(t){this.snake=t},t.prototype.setFood=function(t){this.food=t},t.prototype.updateScore=function(){this.screen.scoreElement.innerHTML="Score: "+String(this.score)},t.prototype.start=function(){var t
if(this.snake.direction==o.right?this.snake.body[0].x<this.screen.border.right-1?t=new r(this.snake.body[0].x+1,this.snake.body[0].y):(this.withWalls&&(this.gameOver=!0),t=new r(this.screen.border.left,this.snake.body[0].y)):this.snake.direction==o.left?this.snake.body[0].x>this.screen.border.left?t=new r(this.snake.body[0].x-1,this.snake.body[0].y):(this.withWalls&&(this.gameOver=!0),t=new r(this.screen.border.right-1,this.snake.body[0].y)):this.snake.direction==o.up?this.snake.body[0].y>this.screen.border.top?t=new r(this.snake.body[0].x,this.snake.body[0].y-1):(this.withWalls&&(this.gameOver=!0),t=new r(this.snake.body[0].x,this.screen.border.down-1)):this.snake.direction==o.down&&(this.snake.body[0].y<this.screen.border.down-1?t=new r(this.snake.body[0].x,this.snake.body[0].y+1):(this.withWalls&&(this.gameOver=!0),t=new r(this.snake.body[0].x,this.screen.border.top))),this.snake.move(t),this.screen.cleanScreen(),this.snake.draw(),this.updateScore(),this.gameOver||this.snake.checkGameOver()){this.gameOver=!0
confirm("Game Over\nWould you like replay a new game ?")&&this.restartGame()}else this.snake.body[0].x==this.food.position.x&&this.snake.body[0].y==this.food.position.y&&(this.snake.eatFood(this.food),this.score+=this.snake.body.length,this.updateScore(),this.food.getRandomBloc()),this.food.draw()
return this.gameOver},t}()
e.Game=a},function(t,e,i){"use strict"
function n(){(c=a.start())&&clearInterval(l)}var o=i(0),r=i(3),s=document.getElementById("snake"),h=new r.DataExtractor(s),a=new o.Game(s,h.getGameController(),h.getBlockSize(),h.getGameMode()),c=!1,l=setInterval(n,h.getGameSpeed())},function(t,e,i){"use strict"
var n=function(){function t(){}return t}()
e.Border=n
var o=function(){function t(t,e){this.element=t,this.initialWidth=getComputedStyle(this.element,null).width,this.initialHeight=getComputedStyle(this.element,null).height,e?(this.blocSize=e,document.getElementsByClassName("bloc")):this.blocSize=20,this.border=new n,this.border.left=0,this.border.right=0,this.border.top=0,this.border.down=0,this.width="0",this.height="0",this.adapt(),this.element.style.width=this.width,this.element.style.height=this.height}return t.prototype.adapt=function(){this.width=parseInt(String(parseFloat(getComputedStyle(this.element,null).width)/this.blocSize))*this.blocSize+"px",this.height=parseInt(String(parseFloat(getComputedStyle(this.element,null).height)/this.blocSize))*this.blocSize+"px",this.border.left=0,this.border.top=0,this.border.right=parseFloat(this.width)/this.blocSize,this.border.down=parseFloat(this.height)/this.blocSize
var t=document.createElement("div")
t.className="scoreBlock",t.style.left=(parseInt(String(this.border.left))+5)*parseInt(String(this.blocSize))+"px",t.style.top=(parseInt(String(this.border.top))-2)*parseInt(String(this.blocSize))+"px",t.style.width=5*this.blocSize+"px",t.style.height=this.blocSize+"px",this.scoreElement=t},t.prototype.cleanScreen=function(){var t=this.element.parentNode,e=document.createElement("div")
e.id="snake",e.style.width=this.width,e.style.height=this.height,e.className="snake",t.replaceChild(e,this.element),this.element=e,this.element.appendChild(this.scoreElement)},t}()
e.Screen=o},function(t,e,i){"use strict"
var n=i(4),o={gameSpeed:80,blockSize:20,gameModeWithWalls:!1,gameController:null},r=function(){function t(t){this.extractGameSpeed(t),this.extractBlockSize(t),this.extractGameController(t),this.extractGameMode(t)}return t.prototype.extractGameSpeed=function(t){var e=parseFloat(t.getAttribute("game-speed"))
this.gameSpeed=e||o.gameSpeed},t.prototype.extractBlockSize=function(t){var e=parseFloat(t.getAttribute("block-size"))
this.blockSize=e||o.blockSize},t.prototype.extractGameController=function(t){var e=t.getAttribute("game-controller")
e?"keyboard"==e.toLowerCase()?this.gameController=new n.KeyboardController:"touchscreen"==e.toLowerCase()?this.gameController=new n.TouchScreenController:this.gameController=this.getRightController():this.gameController=this.getRightController()},t.prototype.extractGameMode=function(t){var e=t.getAttribute("game-mode")
e&&"walls"==e.toLowerCase()?this.gameModeWithWalls=!0:this.gameModeWithWalls=!1},t.prototype.getRightController=function(){return"ontouchstart"in window||navigator.maxTouchPoints?new n.TouchScreenController:new n.KeyboardController},t.prototype.getGameSpeed=function(){return this.gameSpeed},t.prototype.getBlockSize=function(){return this.blockSize},t.prototype.getGameController=function(){return this.gameController},t.prototype.getGameMode=function(){return this.gameModeWithWalls},t}()
e.DataExtractor=r},function(t,e,i){"use strict"
function n(t,e){e==o.Direction.left?t.direction!=o.Direction.right&&(t.direction=o.Direction.left):e==o.Direction.up?t.direction!=o.Direction.down&&(t.direction=o.Direction.up):e==o.Direction.right?t.direction!=o.Direction.left&&(t.direction=o.Direction.right):e==o.Direction.down&&t.direction!=o.Direction.up&&(t.direction=o.Direction.down)}var o=i(0),r=function(){function t(){}return t.prototype.setSnake=function(t){this.snake=t,this.listen(this.snake)},t.prototype.listen=function(t){this.listenEvent=function(e){var i=String(e.keyCode)
"37"==i?n(t,o.Direction.left):"38"==i?n(t,o.Direction.up):"39"==i?n(t,o.Direction.right):"40"==i&&n(t,o.Direction.down)},document.addEventListener("keydown",this.listenEvent,!1)},t.prototype.unlisten=function(){document.removeEventListener("keydown",this.listenEvent,!1)},t}()
e.KeyboardController=r
var s=function(){function t(){this.xDown=null,this.yDown=null}return t.prototype.setSnake=function(t){this.snake=t,this.listen(this.snake)},t.prototype.listen=function(t){this.listenEvent=function(e){"panleft"==e.type?n(t,o.Direction.left):"panright"==e.type?n(t,o.Direction.right):"panup"==e.type?n(t,o.Direction.up):"pandown"==e.type&&n(t,o.Direction.down)},this.hammer=new Hammer(document.getElementsByTagName("body")[0]),this.hammer.get("pan").set({direction:Hammer.DIRECTION_ALL,threshold:6,velocity:.2}),this.hammer.on("panleft panright panup pandown",this.listenEvent)},t.prototype.unlisten=function(){this.hammer.off("panleft panright panup pandown")},t}()
e.TouchScreenController=s}])
