/******/
!function(e){function t(n){if(i[n])return i[n].exports
var o=i[n]={i:n,l:!1,exports:{}}
return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={}
t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e}
return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,i){"use strict"
var n=i(3)
!function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.up=2]="up",e[e.down=3]="down"}(t.Direction||(t.Direction={}))
var o=t.Direction,r=function(){function e(e,t){this.x=e,this.y=t}return e}()
t.Coordonates=r
var s=function(){function e(e,t){this.body=[],this.game=e,this.direction=o.right
for(var i=0;i<t.length;i++)this.body.push(new r(t[i].x,t[i].y))}return e.prototype.check=function(e,t){for(var i=0;i<this.body.length;i++)if(this.body[i].x==e&&this.body[i].y==t)return!0
return!1},e.prototype.draw=function(){for(var e,t,i=0;i<this.body.length;i++){e=parseInt(String(this.body[i].x))*parseInt(String(this.game.screen.blocSize))+"px",t=parseInt(String(this.body[i].y))*parseInt(String(this.game.screen.blocSize))+"px"
var n=document.createElement("div")
n.className="snakeBloc",n.style.width=this.game.screen.blocSize+"px",n.style.height=this.game.screen.blocSize+"px",n.style.top=t,n.style.left=e,n.innerHTML=" ",this.game.screen.element.appendChild(n)}},e.prototype.move=function(e){this.body.pop(),this.body.unshift(e)},e.prototype.eatFood=function(e){this.body.unshift(new r(e.position.x,e.position.y))},e.prototype.checkGameOver=function(){for(var e=1;e<this.body.length;e++)if(this.body[e].x==this.body[0].x&&this.body[e].y==this.body[0].y)return!0
return!1},e}()
t.Snake=s
var h=function(){function e(e){this.game=e,this.position=new r(null,null)}return e.prototype.randomIntFromInterval=function(e,t){return Math.random()*(t-e)+e},e.prototype.getRandomBloc=function(){do{var e=parseInt(String(this.randomIntFromInterval(this.game.screen.border.left,this.game.screen.border.right))),t=parseInt(String(this.randomIntFromInterval(this.game.screen.border.top,this.game.screen.border.down)))}while(this.game.snake.check(e,t))
this.position.x=e,this.position.y=t},e.prototype.draw=function(){var e=parseInt(String(this.position.x))*parseInt(String(this.game.screen.blocSize))+"px",t=parseInt(String(this.position.y))*parseInt(String(this.game.screen.blocSize))+"px",i=document.createElement("div")
i.className="foodBloc",i.style.width=this.game.screen.blocSize+"px",i.style.height=this.game.screen.blocSize+"px",i.style.top=t,i.style.left=e,i.innerHTML=" ",this.game.screen.element.appendChild(i)},e}()
t.Food=h
var a=function(){function e(e,t,i,o){this.score=0,this.gameOver=!1,this.screen=i?new n.Screen(e,i):new n.Screen(e),this.snake=new s(this,[{x:2,y:2},{x:2,y:1},{x:1,y:1},{x:0,y:1},{x:0,y:0}]),this.controller=t||this.screen.getRightController(),this.withWalls=o||!1,this.controller.setSnake(this.snake),this.food=new h(this),this.food.getRandomBloc()}return e.prototype.restartGame=function(){this.score=0,this.gameOver=!1,this.screen.cleanScreen(),this.snake=new s(this,[{x:2,y:2},{x:2,y:1},{x:1,y:1},{x:0,y:1},{x:0,y:0}]),this.controller.setSnake(this.snake),this.food=new h(this),this.food.getRandomBloc()},e.prototype.setScreen=function(e){this.screen=e},e.prototype.setSnake=function(e){this.snake=e},e.prototype.setFood=function(e){this.food=e},e.prototype.updateScore=function(){this.screen.scoreElement.innerHTML="Score: "+String(this.score)},e.prototype.start=function(){var e
if(this.snake.direction==o.right?this.snake.body[0].x<this.screen.border.right-1?e=new r(this.snake.body[0].x+1,this.snake.body[0].y):(this.withWalls&&(this.gameOver=!0),e=new r(this.screen.border.left,this.snake.body[0].y)):this.snake.direction==o.left?this.snake.body[0].x>this.screen.border.left?e=new r(this.snake.body[0].x-1,this.snake.body[0].y):(this.withWalls&&(this.gameOver=!0),e=new r(this.screen.border.right-1,this.snake.body[0].y)):this.snake.direction==o.up?this.snake.body[0].y>this.screen.border.top?e=new r(this.snake.body[0].x,this.snake.body[0].y-1):(this.withWalls&&(this.gameOver=!0),e=new r(this.snake.body[0].x,this.screen.border.down-1)):this.snake.direction==o.down&&(this.snake.body[0].y<this.screen.border.down-1?e=new r(this.snake.body[0].x,this.snake.body[0].y+1):(this.withWalls&&(this.gameOver=!0),e=new r(this.snake.body[0].x,this.screen.border.top))),this.snake.move(e),this.screen.cleanScreen(),this.snake.draw(),this.updateScore(),this.gameOver||this.snake.checkGameOver()){this.gameOver=!0
confirm("Game Over\nWould you like replay a new game ?")&&this.restartGame()}else this.snake.body[0].x==this.food.position.x&&this.snake.body[0].y==this.food.position.y&&(this.snake.eatFood(this.food),this.score+=this.snake.body.length,this.updateScore(),this.food.getRandomBloc()),this.food.draw()
return this.gameOver},e}()
t.Game=a},function(e,t,i){"use strict"
function n(e,t){t==o.Direction.left?e.direction!=o.Direction.right&&(e.direction=o.Direction.left):t==o.Direction.up?e.direction!=o.Direction.down&&(e.direction=o.Direction.up):t==o.Direction.right?e.direction!=o.Direction.left&&(e.direction=o.Direction.right):t==o.Direction.down&&e.direction!=o.Direction.up&&(e.direction=o.Direction.down)}var o=i(0),r=function(){function e(){}return e.prototype.setSnake=function(e){this.snake=e,this.listen(this.snake)},e.prototype.listen=function(e){this.listenEvent=function(t){var i=String(t.keyCode)
"37"==i?n(e,o.Direction.left):"38"==i?n(e,o.Direction.up):"39"==i?n(e,o.Direction.right):"40"==i&&n(e,o.Direction.down)},document.addEventListener("keydown",this.listenEvent,!1)},e.prototype.unlisten=function(){document.removeEventListener("keydown",this.listenEvent,!1)},e}()
t.KeyboardController=r
var s=function(){function e(){this.xDown=null,this.yDown=null}return e.prototype.setSnake=function(e){this.snake=e,this.listen(this.snake)},e.prototype.listen=function(e){this.listenEvent=function(t){"panleft"==t.type?n(e,o.Direction.left):"panright"==t.type?n(e,o.Direction.right):"panup"==t.type?n(e,o.Direction.up):"pandown"==t.type&&n(e,o.Direction.down)},this.hammer=new Hammer(document.getElementsByTagName("body")[0]),this.hammer.get("pan").set({direction:Hammer.DIRECTION_ALL,threshold:1,velocity:.1}),this.hammer.on("panleft panright panup pandown",this.listenEvent)},e.prototype.unlisten=function(){this.hammer.off("panleft panright panup pandown")},e}()
t.TouchScreenController=s},function(e,t,i){"use strict"
function n(){(u=p.start())&&clearInterval(y)}var o=i(0),r=i(1),s=document.getElementById("snake"),h={gameSpeed:80,blockSize:20,gameModeWithWalls:!1,gameController:null},a=parseFloat(s.getAttribute("game-speed")),c=parseFloat(s.getAttribute("block-size")),l=s.getAttribute("game-controller"),d=s.getAttribute("game-mode")
a&&(h.gameSpeed=a),c&&(h.blockSize=c),l&&("keyboard"==l.toLowerCase()?h.gameController=new r.KeyboardController:"touchscreen"==l.toLowerCase()&&(h.gameController=new r.TouchScreenController)),d&&"walls"==d.toLowerCase()&&(h.gameModeWithWalls=!0),console.log("gamespeed:"+h.gameSpeed),console.log("blocksize:"+h.blockSize)
var p=new o.Game(s,h.gameController,h.blockSize,h.gameModeWithWalls),u=!1,y=setInterval(n,h.gameSpeed)},function(e,t,i){"use strict"
var n=i(1),o=function(){function e(){}return e}()
t.Border=o
var r=function(){function e(e,t){this.element=e,this.initialWidth=getComputedStyle(this.element,null).width,this.initialHeight=getComputedStyle(this.element,null).height,t?(this.blocSize=t,document.getElementsByClassName("bloc")):this.blocSize=20,this.border=new o,this.border.left=0,this.border.right=0,this.border.top=0,this.border.down=0,this.width="0",this.height="0",this.adapt(),this.element.style.width=this.width,this.element.style.height=this.height}return e.prototype.adapt=function(){this.width=parseInt(String(parseFloat(getComputedStyle(this.element,null).width)/this.blocSize))*this.blocSize+"px",this.height=parseInt(String(parseFloat(getComputedStyle(this.element,null).height)/this.blocSize))*this.blocSize+"px",this.border.left=0,this.border.top=0,this.border.right=parseFloat(this.width)/this.blocSize,this.border.down=parseFloat(this.height)/this.blocSize
var e=document.createElement("div")
e.className="scoreBlock",e.style.left=(parseInt(String(this.border.left))+5)*parseInt(String(this.blocSize))+"px",e.style.top=(parseInt(String(this.border.top))-2)*parseInt(String(this.blocSize))+"px",e.style.width=5*this.blocSize+"px",e.style.height=this.blocSize+"px",this.scoreElement=e},e.prototype.cleanScreen=function(){var e=this.element.parentNode,t=document.createElement("div")
t.id="snake",t.style.width=this.width,t.style.height=this.height,t.className="snake",e.replaceChild(t,this.element),this.element=t,this.element.appendChild(this.scoreElement)},e.prototype.getRightController=function(){return"ontouchstart"in window||navigator.maxTouchPoints?new n.TouchScreenController:new n.KeyboardController},e}()
t.Screen=r}])
